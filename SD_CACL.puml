@startuml
actor Пользователь
participant "Веб-приложение" as App
participant "База данных" as DB
participant "Калькулятор" as Calc

Пользователь -> App: "Вычислить f(x) для функции #123"
App -> DB: "Проверить существует ли точка (x,y)\nWHERE function_id=123 AND x_value=?"
alt Точка существует
    DB -> App: Вернуть существующий y_value
    App -> Пользователь: Вернуть кэшированный результат
else Точка не существует
    DB -> App: "Результат не найден"
    App -> DB: "Получить детали функции #123"
    DB -> App: Вернуть expression функции
    App -> Calc: "Вычислить f(x) с выражением"
    Calc -> App: Вернуть вычисленный y_value
    App -> DB: "Сохранить новую точку (function_id=123, x, y)"
    App -> Пользователь: Вернуть вычисленный результат
end
@enduml